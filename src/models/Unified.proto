syntax = "proto3";

// Unified

import "google/protobuf/struct.proto";

// An authentication object that represents a specific authorized user's connection to an integration.

message ConnectionAuth {
	optional string token = 1;
	optional string access_token = 2;
	optional string refresh_token = 3;
	optional string expiry_date = 4;
	optional int32 expires_in = 5;
	repeated string emails = 6;
	optional string name = 7;
	optional string user_id = 8;
	optional string app_id = 9;
	optional string client_id = 10;
	optional string client_secret = 11;
	optional string consumer_key = 12;
	optional string consumer_secret = 13;
	optional google.protobuf.Struct meta = 14;
	optional string state = 15;
	repeated string other_auth_info = 16; // When integration.auth_type = "other", this field contains the authentication credentials in the same order as token_names
	optional string api_url = 17;
	optional string authorize_url = 18;
	optional string token_url = 19;
	optional string refresh_url = 20;
	optional string pem = 21; // the PEM X.509 certificate in Base64 ASCII format
	optional string key = 22; // the private KEY X.509 certificate in Base64 ASCII format
	optional int32 refresh_token_expires_in = 23;
	optional string refresh_token_expires_date = 24;
	optional string dev_api_key = 25;
}

// A connection represents a specific authentication of an integration.

message Connection {
	optional string id = 1; // Unique identifier for this integration object
	optional string created_at = 2; // The date that this integration object was created
	optional string updated_at = 3; // The last date that this integration object was updated
	string workspace_id = 4;
	string integration_type = 5; // The integration type
	optional string integration_name = 6;
	optional string external_xref = 7; // customer's user ID
	repeated string permissions = 8;
	repeated string categories = 9; // The Integration categories that this connection supports Valid values: passthrough, hris, ats, auth, crm, enrich, martech, ticketing, uc, accounting, storage, commerce, payment, genai, messaging, kms, task, scim, lms, repo, metadata, calendar, verification, ads, forms, shipping, assessment
	optional ConnectionAuth auth = 10;
	optional bool is_paused = 11; // Whether this integration has exceed the monthly limit of the plan
	optional string auth_aws_arn = 12; // the AWS ARN / secretID for the stored auth field
	optional string environment = 13;
	optional string auth_azure_keyvault_id = 14; // the Azure Key Vault ID for the stored auth field
	optional string auth_gcp_secret_name = 15; // the Google Cloud Secret Manager name for the stored auth field
	optional string auth_hashi_vault_path = 16; // the HashiCorp Vault path for the stored auth field
	optional string last_healthy_at = 17;
	optional string last_unhealthy_at = 18;
}

message IntegrationSupport {
	map<string, bool> methods = 1;
	map<string, string> inbound_fields = 2;
	map<string, string> outbound_fields = 3;
	repeated google.protobuf.Struct webhook_events = 4;
	repeated string raw_objects = 5; // objects that we map from in the integration
	repeated string slow_fields = 6;
	optional string from_webhook = 7;
	optional string list_sort_by_name = 8;
	optional string list_sort_by_created_at = 9;
	optional string list_sort_by_updated_at = 10;
	optional string list_updated_gte = 11;
	optional string list_user_id = 12;
	optional string list_user_mentioned_id = 13;
	optional string list_customer_id = 14;
	optional string list_company_id = 15;
	optional string list_contact_id = 16;
	optional string list_application_id = 17;
	optional string list_candidate_id = 18;
	optional string list_deal_id = 19;
	optional string list_job_id = 20;
	optional string list_invoice_id = 21;
	optional string list_order = 22;
	optional string list_query = 23;
	optional string list_limit = 24;
	optional string list_offset = 25;
	optional string list_root_id = 26;
	optional string list_list_id = 27;
	optional string list_interview_id = 28;
	optional string list_location_id = 29;
	optional string list_collection_id = 30;
	optional string list_ticket_id = 31;
	optional string list_parent_id = 32;
	optional string list_account_id = 33;
	optional string list_item_id = 34;
	optional string list_space_id = 35;
	optional string list_channel_id = 36;
	optional string list_page_id = 37;
	optional string list_type = 38;
	optional string list_link_id = 39;
	optional string list_project_id = 40;
	optional string list_item_variant_id = 41;
	optional string list_raw_fields = 42;
	optional string list_student_id = 43;
	optional string list_class_id = 44;
	optional string list_instructor_id = 45;
	optional string list_course_id = 46;
	optional string list_teacher_id = 47;
	optional string list_repo_id = 48;
	optional string list_org_id = 49;
	optional string list_calendar_id = 50;
	optional string list_task_id = 51;
	optional string search_twitter = 52;
	optional string search_name = 53;
	optional string search_linkedinurl = 54;
	optional string search_email = 55;
	optional string search_domain = 56;
	optional string list_event_id = 57;
	optional string list_start_gte = 58;
	optional string list_end_lt = 59;
	optional string list_lead_id = 60;
	optional string list_call_id = 61;
	optional string list_document_id = 62;
	optional string list_payment_id = 63;
	optional string list_status = 64;
	optional string list_branch_id = 65;
	optional string list_pipeline_id = 66;
	optional string list_category_id = 67;
	optional string list_package_id = 68;
	optional string list_expand = 69;
	optional string native_webhook_parent_id = 70;
	optional string native_webhook_project_id = 71;
	optional string native_webhook_company_id = 72;
	optional string native_webhook_task_id = 73;
	optional string native_webhook_channel_id = 74;
	optional string native_webhook_calendar_id = 75;
	optional string native_webhook_event_id = 76;
	optional string virtual_webhook_updated_gte = 77;
	optional string virtual_webhook_limit = 78;
	optional string virtual_webhook_channel_id = 79;
	optional string virtual_webhook_parent_id = 80;
	optional string virtual_webhook_contact_id = 81;
	optional string virtual_webhook_deal_id = 82;
	optional string virtual_webhook_company_id = 83;
	optional string virtual_webhook_user_id = 84;
	optional string virtual_webhook_user_mentioned_id = 85;
	optional string virtual_webhook_type = 86;
	optional string virtual_webhook_ticket_id = 87;
	optional string virtual_webhook_expand = 88;
	optional string virtual_webhook_status = 89;
	optional string virtual_webhook_start_gte = 90;
	optional string virtual_webhook_end_lt = 91;
	optional string virtual_webhook_task_id = 92;
	optional string virtual_webhook_space_id = 93;
	optional string virtual_webhook_repo_id = 94;
	optional string virtual_webhook_project_id = 95;
	optional string virtual_webhook_pipeline_id = 96;
	optional string virtual_webhook_page_id = 97;
	optional string virtual_webhook_org_id = 98;
	optional string virtual_webhook_location_id = 99;
	optional string virtual_webhook_list_id = 100;
	optional string virtual_webhook_job_id = 101;
	optional string virtual_webhook_item_id = 102;
	optional string virtual_webhook_fields = 103;
	optional string virtual_webhook_event_id = 104;
	optional string virtual_webhook_customer_id = 105;
	optional string virtual_webhook_collection_id = 106;
	optional string virtual_webhook_candidate_id = 107;
	optional string virtual_webhook_call_id = 108;
	optional string virtual_webhook_branch_id = 109;
	optional string virtual_webhook_application_id = 110;
	optional string virtual_webhook_item_variant_id = 111;
	optional string virtual_webhook_calendar_id = 112;
	optional string virtual_webhook_lead_id = 113;
	optional string list_payslip_id = 114;
	optional string list_benefit_id = 115;
	optional string list_saleschannel_id = 116;
	optional string virtual_webhook_saleschannel_id = 117;
	optional string list_campaign_id = 118;
	optional string list_ad_id = 119;
	optional string list_group_id = 120;
	optional string virtual_webhook_campaign_id = 121;
	optional string virtual_webhook_ad_id = 122;
	optional string virtual_webhook_group_id = 123;
	optional string list_form_id = 124;
	optional string virtual_webhook_form_id = 125;
	optional string native_webhook_form_id = 126;
	optional string list_order_id = 127;
	optional string virtual_webhook_order_id = 128;
	optional string native_webhook_order_id = 129;
	optional string list_carrier_id = 130;
	optional string virtual_webhook_carrier_id = 131;
	optional string native_webhook_carrier_id = 132;
	optional string list_shipment_id = 133;
	optional string virtual_webhook_shipment_id = 134;
	optional string native_webhook_shipment_id = 135;
	optional string list_label_id = 136;
	optional string virtual_webhook_label_id = 137;
	optional string native_webhook_label_id = 138;
	optional string list_member_id = 139;
	optional string virtual_webhook_member_id = 140;
	optional string native_webhook_member_id = 141;
	optional string list_content_id = 142;
	optional string virtual_webhook_course_id = 143;
	optional string native_webhook_course_id = 144;
	optional string virtual_webhook_student_id = 145;
	optional string native_webhook_student_id = 146;
}

// Informational object for supported integrations.

message Integration {
	string type = 1; // Identifier for this integration
	optional string created_at = 2; // Date that this integration was supported (YYYY-MM-DD)
	optional string updated_at = 3; // YYYY-MM-DD
	string name = 4; // The integration's name
	optional bool is_active = 5; // Is this integration active in this workspace
	repeated string categories = 6; // The categories of support solutions that this integration has Valid values: passthrough, hris, ats, auth, crm, enrich, martech, ticketing, uc, accounting, storage, commerce, payment, genai, messaging, kms, task, scim, lms, repo, metadata, calendar, verification, ads, forms, shipping, assessment
	optional string api_docs_url = 7; // The URL of the integration's API documentation
	optional string logo_url = 8; // The URL of the integration's logo
	optional bool in_progress = 9; // If this integration is not yet available as it is currently being built by unified.to
	optional bool is_hidden = 10;
	optional string color = 11; // button background color for AUTH
	optional string text_color = 12; // text color for AUTH
	optional string fa_icon = 13; // font-awesome icon
	repeated string token_names = 14; // if auth_types = 'token'
	repeated string token_instructions = 15; // instructions for the user on how to find the token/key
	optional string web_url = 16; // URL for the software vendor
	optional string rate_limit_description = 17;
	optional bool beta = 18; // This integration is new and is still considered "beta"
	map<string, IntegrationSupport> support = 19;
	optional string tested_at = 20;
	optional google.protobuf.Struct sandbox = 21;
	optional google.protobuf.Struct partnership = 22;
	optional google.protobuf.Struct saml = 23;
	optional string description = 24;
	optional google.protobuf.Struct api = 25;
	optional bool featured = 26;
	optional int32 popularity = 27;
	optional int32 active_healthy_connections = 28;
}

message Invoice {
	string stripe_id = 1;
	string created_at = 2;
	int32 amount = 3;
	int32 connections = 4;
	string plan = 5;
}

message Issue {
	optional string id = 1;
	optional string created_at = 2;
	optional string updated_at = 3;
	string title = 4;
	string status = 5;
	optional string url = 6;
	string workspace_id = 7;
	repeated string type = 8;
	optional int32 resolution_time = 9;
	string ticket_ref = 10;
	optional int32 size = 11; // 1-5, 1 is lowest
	optional int32 importance = 12; // 1-5, 1 is lowest
}

message Permission {
	bool can_create_org = 1;
	bool can_leave_org = 2;
	bool can_downgrade = 3;
	bool can_invite = 4;
	bool can_update_org = 5;
	bool can_add_and_remove_admin = 6;
	bool can_accept_invite = 7;
	bool can_reject_invite = 8;
	bool can_pay = 9;
	bool can_get_invoices = 10;
	bool is_admin = 11;
}

message Plan {
	string name = 1;
	optional string description = 2; // description
	optional int32 max_connections = 3; // Maximum active connections (1+ API call per month)
	optional string stripe_product_id = 4;
	optional string stripe_price_id = 5;
	optional int32 min_price = 6;
	optional int32 price_per_mille_requests = 7;
	optional bool custom_oauth = 8;
	optional int32 max_requests = 9;
	optional string test_stripe_product_id = 10;
	optional string test_stripe_price_id = 11;
	optional int32 min_annual_price = 12;
	optional string stripe_annual_price_id = 13;
	optional string test_stripe_annual_price_id = 14;
	optional string stripe_overage_price_id = 15;
	optional string test_stripe_overage_price_id = 16;
	optional bool dedicated_channel = 17; // Dedicated Slack/Discord channel
}

// The User object represents you on the system. A user can belong to multiple workspaces (ie. organizations).

message User {
	optional string id = 1;
	optional string created_at = 2;
	optional string updated_at = 3;
	string name = 4;
	string email = 5;
	string workspace_id = 6; // The current workspace
	repeated string workspace_ids = 7; // A list of all of the user's workspaces
	optional string environment = 8;
	optional google.protobuf.Struct meta = 9;
}

// A webhook is used to POST new/updated information to your server.

message Webhook {
	optional string id = 1;
	optional string created_at = 2;
	optional string updated_at = 3;
	optional string workspace_id = 4;
	string connection_id = 5;
	optional string hook_url = 6; // The URL of the webhook
	string object_type = 7; // The object to return (eg. CRM "contact") Valid values: accounting_account, accounting_transaction, accounting_journal, accounting_contact, accounting_invoice, accounting_bill, accounting_creditmemo, accounting_taxrate, accounting_organization, accounting_order, accounting_salesorder, accounting_purchaseorder, accounting_report, accounting_balancesheet, accounting_profitloss, accounting_trialbalance, accounting_category, accounting_expense, accounting_cashflow, payment_payment, payment_link, payment_payout, payment_refund, payment_subscription, commerce_item, commerce_collection, commerce_inventory, commerce_location, commerce_review, commerce_saleschannel, commerce_itemvariant, verification_package, verification_request, assessment_package, assessment_order, ats_activity, ats_application, ats_applicationstatus, ats_candidate, ats_document, ats_interview, ats_job, ats_scorecard, ats_company, crm_company, crm_contact, crm_deal, crm_event, crm_lead, crm_pipeline, hris_employee, hris_group, hris_payslip, hris_timeoff, hris_company, hris_location, hris_device, hris_timeshift, hris_deduction, hris_benefit, hris_bankaccount, martech_list, martech_member, martech_campaign, martech_report, passthrough, ticketing_note, ticketing_ticket, ticketing_customer, ticketing_category, uc_contact, uc_call, uc_comment, uc_recording, enrich_person, enrich_company, storage_file, genai_model, genai_prompt, genai_embedding, messaging_message, messaging_channel, messaging_event, kms_space, kms_page, kms_comment, task_project, task_task, task_comment, task_change, scim_users, scim_groups, lms_course, lms_class, lms_student, lms_instructor, lms_content, lms_collection, lms_activity, repo_organization, repo_repository, repo_branch, repo_commit, repo_pullrequest, metadata_metadata, calendar_calendar, calendar_event, calendar_busy, calendar_link, calendar_recording, calendar_webinar, ads_organization, ads_ad, ads_campaign, ads_report, ads_group, ads_creative, ads_insertionorder, forms_form, forms_submission, shipping_carrier, shipping_rate, shipping_shipment, shipping_label, shipping_tracking
	optional int32 interval = 8; // The interval (in minutes) to check for updated/new objets. 
	string checked_at = 9; // The last date/time that a check was done on this object
	string integration_type = 10;
	optional string environment = 11;
	string event = 12;
	repeated string runs = 13; // An array of the most revent virtual webhook runs
	optional string fields = 14;
	optional string webhook_type = 15;
	optional google.protobuf.Struct meta = 16;
	optional bool is_healthy = 17;
	optional int32 page_max_limit = 18;
	map<string, string> filters = 19;
	optional string db_type = 20;
	optional string db_url = 21;
	optional string db_schema = 22;
	optional string db_name_prefix = 23;
	optional bool is_paused = 24;
}

message WebhookData {
	repeated google.protobuf.Struct data = 1; // The data array will contact an array of specific objects according to the webhook's connection. (eg. CRM Contacts)
	Webhook webhook = 2; // The webhook object
	string nonce = 3; // random string
	optional string sig = 4; // @deprecated; use sig256 instead
	optional string sig256 = 5; // HMAC-SHA256(workspace.secret, data + nonce)
	string type = 6;
	optional string external_xref = 7;
}

message WorkspaceIntegration {
	string integration_type = 1;
	optional string client_id = 2;
	optional string client_secret = 3;
	optional string consumer_key = 4;
	optional string consumer_secret = 5;
	bool is_active = 6;
	optional string api_url = 7;
	optional string authorize_url = 8;
	optional string token_url = 9;
	optional string refresh_url = 10;
	optional string base_url = 11;
	optional string pem = 12; // the PEM X.509 certificate in Base64 ASCII format
	optional string key = 13; // the private KEY X.509 certificate in Base64 ASCII format
	optional string environment = 14; // authentication environment Default value: Production
	repeated string categories = 15;
	optional string dev_api_key = 16;
	map<string, string> overriden_scopes = 17;
}

// The User's workspace object. A workspace is like an organization that one or more users belong to.

message Workspace {
	optional string id = 1;
	optional string created_at = 2;
	optional string updated_at = 3;
	string name = 4;
	repeated string admin_ids = 5; // Only these users can add additional admins and invite other users
	repeated string invited_emails = 6;
	optional string pay_user_id = 7;
	optional string plan = 8;
	optional string stripe_customer = 9;
	repeated string stripe_subscriptions = 10;
	repeated string stripe_prices = 11;
	optional string secret = 12; // Workspace API secret
	repeated string ip_addresses = 13; // a list of IP addresses that are allowed to access this workspace
	optional string aws_region = 14;
	optional string aws_key = 15;
	optional string aws_secret = 16;
	optional string datadog_apikey = 17;
	optional string datadog_site = 18;
	repeated string environments = 19; // a list of authentication environments for the workspace integrations
	repeated string add_ons = 20;
	optional google.protobuf.Struct checklist = 21;
	optional string plan_term = 22; // monthly or yearly Valid values: monthly, yearly Default value: monthly
	optional string stripe_canceling_at = 23;
	optional string domain = 24; // when set, users of the same domain will auto-join this workspace.  must not be gmail.com or other public domains
	optional string event_webhook_url = 25;
	repeated string event_webhook_events = 26;
	optional string custom_auth_domain = 27;
	optional bool custom_auth_domain_valid = 28;
	optional string custom_api_domain = 29;
	optional bool slow_fields_opt_in = 30;
	optional string notion_verification_token = 31;
	optional string favicon_url = 32;
	optional bool is_baa = 33;
	optional string saml_integration_type = 34;
	optional string saml_idp_url = 35;
	optional string saml_idp_entity_id = 36;
	optional string saml_pem = 37; // the PEM X.509 certificate in Base64 ASCII format
	optional bool saml_only_login = 38; // if true, only allow SAML login
	optional string azure_keyvault_url = 39;
	optional string azure_tenant_id = 40;
	optional string azure_client_id = 41;
	optional string azure_client_secret = 42;
	optional string gcp_project_id = 43;
	optional string gcp_client_email = 44;
	optional string gcp_private_key = 45;
	optional string hashicorp_vault_url = 46;
	optional string hashicorp_vault_token = 47;
	optional string hashicorp_vault_namespace = 48;
	optional string hashicorp_vault_kv_mount = 49;
	optional string hashicorp_vault_kv_version = 50; // 1 or 2
	optional string grafana_apikey = 51;
	optional string grafana_site = 52;
	optional string clickhouse_url = 53;
	optional string clickhouse_username = 54;
	optional string clickhouse_password = 55;
}

